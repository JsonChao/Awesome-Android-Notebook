---

		title:  æ·±åº¦æ¢ç´¢ Gradle è‡ªåŠ¨åŒ–æ„å»ºæŠ€æœ¯ï¼ˆå››ã€è‡ªå®šä¹‰ Gradle æ’ä»¶ï¼‰
		date: 2020/3/19 17:43:00   
		tags: 
		- Androidè¿›é˜¶
		categories: Androidè¿›é˜¶
		thumbnail: https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1557665970516&di=b58d306a0db07efca58f8c9b655f5c13&imgtype=0&src=http%3A%2F%2Fimg02.tooopen.com%2Fimages%2F20160520%2Ftooopen_sl_055418231108.jpg
---

---

<section id="nice" data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com" style="font-size: 16px; color: black; padding: 0 10px; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; margin-top: -10px;"><h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">å‰è¨€</span><span class="suffix"></span></h1>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">æˆä¸ºä¸€åä¼˜ç§€çš„Androidå¼€å‘ï¼Œéœ€è¦ä¸€ä»½å®Œå¤‡çš„<a href="https://github.com/JsonChao/Awesome-Android-Exercise" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">çŸ¥è¯†ä½“ç³»</a>ï¼Œåœ¨è¿™é‡Œï¼Œè®©æˆ‘ä»¬ä¸€èµ·æˆé•¿ä¸ºè‡ªå·±æ‰€æƒ³çš„é‚£æ ·~ã€‚</span><span class="suffix" style="display: none;"></span></h3>
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">ä¸€ã€Gradle æ’ä»¶æ¦‚è¿°</span><span class="suffix"></span></h1>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;"><strong style="font-weight: bold; color: black;">è‡ªå®šä¹‰ Gradle æ’ä»¶çš„æœ¬è´¨å°±æ˜¯æŠŠé€»è¾‘ç‹¬ç«‹çš„ä»£ç è¿›è¡ŒæŠ½å–å’Œå°è£…ï¼Œä»¥ä¾¿äºæˆ‘ä»¬æ›´é«˜æ•ˆåœ°é€šè¿‡æ’ä»¶ä¾èµ–è¿™ä¸€æ–¹å¼è¿›è¡ŒåŠŸèƒ½å¤ç”¨</strong>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">è€Œåœ¨ Android ä¸‹çš„ gradle æ’ä»¶å…±åˆ†ä¸º <strong style="font-weight: bold; color: black;">ä¸¤å¤§ç±»</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">è„šæœ¬æ’ä»¶</code>ï¼š<strong style="font-weight: bold; color: black;">åŒæ™®é€šçš„ gradle è„šæœ¬ç¼–å†™å½¢å¼ä¸€æ ·ï¼Œé€šè¿‡ apply from: 'JsonChao.gradle' å¼•ç”¨</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">å¯¹è±¡æ’ä»¶</code>ï¼š<strong style="font-weight: bold; color: black;">é€šè¿‡æ’ä»¶å…¨è·¯å¾„ç±»åæˆ– id å¼•ç”¨</strong>ï¼Œå®ƒä¸»è¦æœ‰ <strong style="font-weight: bold; color: black;">ä¸‰ç§ç¼–å†™å½¢å¼</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
<ul style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ï¼‰ã€<strong style="font-weight: bold; color: black;">åœ¨å½“å‰æ„å»ºè„šæœ¬ä¸‹ç›´æ¥ç¼–å†™</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ï¼‰ã€<strong style="font-weight: bold; color: black;">åœ¨ buildSrc ç›®å½•ä¸‹ç¼–å†™</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">3ï¼‰ã€<strong style="font-weight: bold; color: black;">åœ¨å®Œå…¨ç‹¬ç«‹çš„é¡¹ç›®ä¸­ç¼–å†™</strong>ã€‚</section></li></ul>
</section></li></ul>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ä¸‹é¢ğŸ‘‡ï¼Œæˆ‘ä»¬å°±å…ˆæ¥çœ‹çœ‹å¦‚ä½•ç¼–å†™ä¸€ä¸ªè„šæœ¬æ’ä»¶ã€‚</p>
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">äºŒã€è„šæœ¬æ’ä»¶</span><span class="suffix"></span></h1>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">åŒæ™®é€šçš„ gradle è„šæœ¬ç¼–å†™å½¢å¼ä¸€æ ·ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥å†™åœ¨ build.gradle é‡Œé¢ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ–°å»ºä¸€ä¸ª gradle è„šæœ¬æ–‡ä»¶è¿›è¡Œç¼–å†™ã€‚</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">PluginDemo</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">implements</span>&nbsp;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">Plugin</span>&lt;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">Project</span>&gt;&nbsp;</span>{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">void</span>&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">apply</span><span class="hljs-params" style="line-height: 26px;">(Project&nbsp;target)</span>&nbsp;</span>{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'Hello&nbsp;author!'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ç„¶åï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„ gradle è„šæœ¬ä¸­é€šè¿‡ <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">apply pluginï¼š pluginName</code> çš„æ–¹å¼å³å¯å¼•ç”¨å¯¹åº”çš„æ’ä»¶ã€‚</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">apply&nbsp;plugin:&nbsp;PluginDemo<br></code></pre>
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">ä¸‰ã€è¿ç”¨ buildSrc é»˜è®¤æ’ä»¶ç›®å½•</span><span class="suffix"></span></h1>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">åœ¨å®Œæˆå‡ ä¸ªè‡ªå®šä¹‰ Gradle æ’ä»¶ä¹‹åï¼Œæˆ‘å‘ç° <strong style="font-weight: bold; color: black;">åœ¨ buildSrc ç›®å½•ä¸‹ç¼–å†™æ’ä»¶çš„æ–¹å¼æ˜¯å¼€å‘æ•ˆç‡æœ€é«˜çš„ï¼Œé¦–å…ˆï¼ŒbuildSrc æ˜¯é»˜è®¤çš„æ’ä»¶ç›®å½•ï¼Œå…¶æ¬¡ï¼Œåœ¨ buildSrc ç›®å½•ä¸‹ä¸ç‹¬ç«‹å·¥ç¨‹çš„æ’ä»¶å·¥ç¨‹ä¸€æ ·ï¼Œä¹Ÿèƒ½å¤Ÿå‘å¸ƒæ’ä»¶</strong>ï¼Œè¿™é‡Œä»…ä»…åªéœ€å¯¹æŸäº›é…ç½®åšä¸€äº›è°ƒæ•´å³å¯ï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•æ¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ Gradle æ’ä»¶ã€‚</p>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">1ã€åˆ›å»ºä¸€ä¸ªèƒ½è¿è¡Œèµ·æ¥çš„ç©º Plugin</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">é¦–å…ˆéœ€è¦äº†è§£çš„æ˜¯ï¼ŒbuildSrc ç›®å½•æ˜¯ gradle é»˜è®¤çš„æ„å»ºç›®å½•ä¹‹ä¸€ï¼Œè¯¥ç›®å½•ä¸‹çš„ä»£ç ä¼šåœ¨æ„å»ºæ—¶è‡ªåŠ¨åœ°è¿›è¡Œç¼–è¯‘æ‰“åŒ…ï¼Œç„¶åå®ƒä¼šè¢«æ·»åŠ åˆ° buildScript ä¸­çš„ classpath ä¸‹ï¼Œæ‰€ä»¥ä¸éœ€è¦ä»»ä½•é¢å¤–çš„é…ç½®ï¼Œå°±å¯ä»¥ç›´æ¥è¢«å…¶ä»–æ¨¡å—ä¸­çš„ gradle è„šæœ¬å¼•ç”¨ã€‚æ­¤å¤–ï¼Œå…³äº buildSrcï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ä»¥ä¸‹ <strong style="font-weight: bold; color: black;">ä¸¤ç‚¹</strong>ï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ï¼‰ã€<strong style="font-weight: bold; color: black;">buildSrc çš„æ‰§è¡Œæ—¶æœºä¸ä»…æ—©äºä»»ä½•â¼€ä¸ª projectï¼ˆbuild.gradleï¼‰ï¼Œè€Œä¸”ä¹Ÿæ—©äº settings.gradle</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ï¼‰ã€<strong style="font-weight: bold; color: black;">settings.gradle ä¸­å¦‚æœé…ç½®äº† ':buildSrc' ï¼ŒbuildSrc â½¬å½•å°±ä¼šè¢«å½“åšæ˜¯å­ Project ï¼Œ å› ä¼šå®ƒä¼šè¢«æ‰§è¡Œä¸¤éã€‚æ‰€ä»¥åœ¨ settings.gradle é‡Œé¢åº”è¯¥åˆ æ‰ ':buildSrc' çš„é…ç½®</strong>ã€‚</section></li></ul>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">æ’ä»¶ moudle åˆ›å»ºä¸‰éƒ¨æ›²</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">1ï¼‰ã€<strong style="font-weight: bold; color: black;">æ–°å»ºä¸€ä¸ª moduleï¼Œå¹¶å°†å…¶å‘½åä¸º buildSrcã€‚è¿™æ ·ï¼ŒGradle é»˜è®¤ä¼šå°†å…¶è¯†åˆ«ä¼šå·¥ç¨‹çš„æ’ä»¶ç›®å½•</strong>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">2ï¼‰ã€<strong style="font-weight: bold; color: black;">src ç›®å½•ä¸‹åˆ é™¤ä»…ä¿ç•™ä¸€ä¸ªç©ºçš„ main ç›®å½•ï¼Œå¹¶åœ¨ main ç›®å½•ä¸‹æ–°å»º 1 ä¸ª groovy ç›®å½•ä¸ 1 ä¸ª resources ç›®å½•</strong>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">3ï¼‰ã€<strong style="font-weight: bold; color: black;">å°† buildSrc ä¸­çš„ build.gradle ä¸­çš„æ‰€æœ‰é…ç½®åˆ å»ï¼Œå¹¶é…ç½® groovyã€resources ä¸ºæºç ç›®å½•ä¸ç›¸å…³ä¾èµ–å³å¯</strong>ã€‚é…ç½®ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">apply&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">plugin:</span>&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'groovy'</span><br><br>repositories&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;google()<br>&nbsp;&nbsp;&nbsp;&nbsp;mavenCentral()<br>&nbsp;&nbsp;&nbsp;&nbsp;jcenter()<br>}<br><br>dependencies&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;Groovy&nbsp;DSL</span><br>&nbsp;&nbsp;&nbsp;&nbsp;implementation&nbsp;localGroovy()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;Gradle&nbsp;DSL</span><br>&nbsp;&nbsp;&nbsp;&nbsp;implementation&nbsp;gradleApi()<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;Android&nbsp;DSL</span><br>&nbsp;&nbsp;&nbsp;&nbsp;implementation&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'com.android.tools.build:gradle:3.6.2'</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;ASM&nbsp;V7.1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;implementation&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">group:</span>&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'org.ow2.asm'</span>,&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">name:</span>&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'asm'</span>,&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">version:</span>&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'7.1'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;implementation&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">group:</span>&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'org.ow2.asm'</span>,&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">name:</span>&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'asm-commons'</span>,&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">version:</span>&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'7.1'</span><br><br>}<br><br>sourceSets&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;main&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groovy&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srcDir&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'src/main/groovy'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resources&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srcDir&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'src/main/resources'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">æ’ä»¶åˆ›å»ºäºŒéƒ¨æ›²</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">1ï¼‰ã€é¦–å…ˆï¼Œ<strong style="font-weight: bold; color: black;">åœ¨æˆ‘çš„ main ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé€’å½’æ–‡ä»¶å¤¹ "com.json.chao.study"ï¼Œé‡Œé¢ç›´æ¥æ–°å»ºä¸€ä¸ªåä¸º CustomGradlePlugin çš„æ™®é€šæ–‡ä»¶</strong>ã€‚ç„¶åï¼Œ<strong style="font-weight: bold; color: black;">åœ¨æ–‡ä»¶ä¸­å†™å…¥ 'class CustomGradlePlugin' ï¼Œè¿™æ—¶ CustomGradlePlugin ä¼šè¢«è‡ªåŠ¨è¯†åˆ«ä¸ºç±»ï¼Œæ¥ç€å°†å…¶å®ç° Plugin<project> æ¥å£ï¼Œå…¶ä¸­çš„ apply æ–¹æ³•å°±æ˜¯æ’ä»¶è¢«å¼•å…¥æ—¶è¦æ‰§è¡Œçš„æ–¹æ³•</project></strong>ï¼Œè¿™æ ·ï¼Œè‡ªå®šä¹‰æ’ä»¶ç±»å°±åŸºæœ¬å®Œæˆäº†ï¼ŒCustomGradlePlugin ç±»çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;*&nbsp;è‡ªå®šä¹‰æ’ä»¶<br>&nbsp;*/</span><br><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">CustomGradlePlugin</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">implements</span>&nbsp;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">Plugin</span>&lt;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">Project</span>&gt;&nbsp;</span>{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;æ’ä»¶è¢«å¼•å…¥æ—¶è¦æ‰§è¡Œçš„æ–¹æ³•<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@param</span>&nbsp;project&nbsp;å¼•å…¥å½“å‰æ’ä»¶çš„&nbsp;project<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">void</span>&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">apply</span><span class="hljs-params" style="line-height: 26px;">(Project&nbsp;project)</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"Hello&nbsp;plugin..."</span>&nbsp;+&nbsp;project.name<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">2ï¼‰ã€æ¥ç€ï¼Œ<strong style="font-weight: bold; color: black;">åœ¨ resources ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª META-INF.gradle-plugins çš„é€’å½’ç›®å½•ï¼Œé‡Œé¢æ–°å»ºä¸€ä¸ª "com.json.chao.study.properties" æ–‡ä»¶ï¼Œå…¶ä¸­ '.properties' å‰é¢çš„åå­—å³ä¸º è‡ªå®šä¹‰æ’ä»¶çš„åå­—ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ‡è¯†è¯¥æ’ä»¶å¯¹åº”çš„æ’ä»¶å®ç°ç±»</strong>ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">implementation-<span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">class</span></span>=com.json.chao.study.CustomGradlePlugin<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">è¿™æ ·ï¼Œä¸€ä¸ªæœ€ç®€å•çš„è‡ªå®šä¹‰æ’ä»¶å°±å®Œæˆäº†ã€‚æ¥ç€ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ app moudle ä¸‹çš„ build.gradle æ–‡ä»¶ä¸­ä½¿ç”¨ 'apply plugin: 'com.json.chao.study' å¼•å…¥æˆ‘ä»¬å®šä¹‰å¥½çš„æ’ä»¶ç„¶ååŒæ­¥å·¥ç¨‹å³å¯çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">...<br>&gt;&nbsp;Configure&nbsp;project&nbsp;:app<br>Hello&nbsp;plugin...app<br>...<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å¯ä»¥çœ‹åˆ°ï¼Œ<strong style="font-weight: bold; color: black;">é€šè¿‡ id å¼•ç”¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥éšè—ç±»åç­‰ç»†èŠ‚ï¼Œä½¿å¾—æ’ä»¶çš„å¼•ç”¨å˜å¾—æ›´åŠ å®¹æ˜“</strong>ã€‚</p>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">2ã€ä½¿ç”¨è‡ªå®šä¹‰ Extension ä¸ Task</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">1ã€è‡ªå®šä¹‰ Extension</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">åœ¨ <a href="https://juejin.im/post/6844904132092903437#heading-47" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">æ·±åº¦æ¢ç´¢ Gradle è‡ªåŠ¨åŒ–æ„å»ºæŠ€æœ¯ï¼ˆä¸‰ã€Gradle æ ¸å¿ƒè§£å¯†ï¼‰</a> ä¸€æ–‡ä¸­æˆ‘ä»¬è®²è§£äº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬ä¿¡æ¯ç®¡ç†çš„ taskï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å°†å®ƒæ¥å…¥åˆ° gradle çš„æ„å»ºæµç¨‹ä¹‹ä¸­ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ä¸ºäº†èƒ½è®© App ä¼ å…¥ç›¸å…³çš„ç‰ˆæœ¬ä¿¡æ¯å’Œç”Ÿæˆçš„ç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶è·¯å¾„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”¨äºé…ç½®ç‰ˆæœ¬ä¿¡æ¯çš„ Extensionï¼Œ<strong style="font-weight: bold; color: black;">å…¶å®è´¨å°±æ˜¯ä¸€ä¸ªå®ä½“ç±»</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">/*<br>&nbsp;*&nbsp;Description:&nbsp;è´Ÿè´£&nbsp;Release&nbsp;ç‰ˆæœ¬ç®¡ç†çš„æ‰©å±•å±æ€§åŒºåŸŸ<br>&nbsp;*<br>&nbsp;*&nbsp;@author&nbsp;quchao<br>&nbsp;*/</span><br><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">ReleaseInfoExtension</span>&nbsp;</span>{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;versionName;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;versionCode;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;versionInfo;<br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;fileName;<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ç„¶åï¼Œåœ¨æˆ‘ä»¬çš„ CustomGradlePlugin çš„ apply æ–¹æ³•ä¸­åŠ å…¥ä¸‹é¢ä»£ç å»åˆ›å»ºç”¨äºè®¾ç½®ç‰ˆæœ¬ä¿¡æ¯çš„æ‰©å±•å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;åˆ›å»ºç”¨äºè®¾ç½®ç‰ˆæœ¬ä¿¡æ¯çš„æ‰©å±•å±æ€§</span><br>project.extensions.create(<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"releaseInfo"</span>,&nbsp;ReleaseInfoExtension.class)<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">åœ¨ project.extensions.create æ–¹æ³•çš„å†…éƒ¨å…¶å®è´¨æ˜¯ <strong style="font-weight: bold; color: black;">é€šè¿‡ project.extensions.create() æ–¹æ³•æ¥è·å–åœ¨ releaseInfo é—­åŒ…ä¸­å®šä¹‰çš„å†…å®¹å¹¶é€šè¿‡åå°„å°†é—­åŒ…çš„å†…å®¹è½¬æ¢æˆä¸€ä¸ª ReleaseInfoExtension å¯¹è±¡</strong>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">æœ€åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ app moudle çš„ build.gradle è„šæœ¬ä¸­ä½¿ç”¨ releaseInfo å»é…ç½®æ‰©å±•å±æ€§ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">releaseInfo&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;versionCode&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"1"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;versionName&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"1.0.0"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;versionInfo&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"ç¬¬ä¸€ä¸ªç‰ˆæœ¬~"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;fileName&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"releases.xml"</span><br>}<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">2ã€è‡ªå®šä¹‰ Task</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;"><strong style="font-weight: bold; color: black;">ä½¿ç”¨è‡ªå®šä¹‰æ‰©å±•å±æ€§ Extension ä»…ä»…æ˜¯ä¸ºäº†è®©ä½¿ç”¨æ’ä»¶è€…æœ‰é…ç½®æ’ä»¶çš„èƒ½åŠ›ã€‚è€Œæ’ä»¶è¿˜å¾—å€ŸåŠ©è‡ªå®šä¹‰ Task æ¥å®ç°ç›¸åº”çš„åŠŸèƒ½</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ›´æ–°ç‰ˆæœ¬ä¿¡æ¯çš„ Taskï¼Œæˆ‘ä»¬å°†å…¶å‘½åä¸º ReleaseInfoTaskï¼Œå…¶å…·ä½“å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;*&nbsp;æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯çš„&nbsp;Task<br>&nbsp;*/</span><br><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">ReleaseInfoTask</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">extends</span>&nbsp;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">DefaultTask</span>&nbsp;</span>{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;ReleaseInfoTask()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;1ã€åœ¨æ„é€ å™¨ä¸­é…ç½®äº†è¯¥&nbsp;Task&nbsp;å¯¹åº”çš„&nbsp;Task&nbsp;groupï¼Œå³&nbsp;Task&nbsp;ç»„ï¼Œå¹¶ä¸ºå…¶æ·»åŠ ä¸Šäº†å¯¹åº”çš„æè¿°ä¿¡æ¯ã€‚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;group&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'version_manager'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;description&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'release&nbsp;info&nbsp;update'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;2ã€åœ¨&nbsp;gradle&nbsp;æ‰§è¡Œé˜¶æ®µæ‰§è¡Œ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta" style="color: #75715e; line-height: 26px;">@TaskAction</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">void</span>&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">doAction</span><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateVersionInfo();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">private</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">void</span>&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">updateVersionInfo</span><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;3ã€ä»&nbsp;realeaseInfo&nbsp;Extension&nbsp;å±æ€§ä¸­è·å–ç›¸åº”çš„ç‰ˆæœ¬ä¿¡æ¯</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;versionCodeMsg&nbsp;=&nbsp;project.extensions.releaseInfo.versionCode;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;versionNameMsg&nbsp;=&nbsp;project.extensions.releaseInfo.versionName;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;versionInfoMsg&nbsp;=&nbsp;project.extensions.releaseInfo.versionInfo;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;fileName&nbsp;=&nbsp;project.extensions.releaseInfo.fileName;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;file&nbsp;=&nbsp;project.file(fileName)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;4ã€å°†å®ä½“å¯¹è±¡å†™å…¥åˆ°&nbsp;xml&nbsp;æ–‡ä»¶ä¸­</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;sw&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;StringWriter()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;xmlBuilder&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;MarkupBuilder(sw)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(file.text&nbsp;!=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">null</span>&nbsp;&amp;&amp;&nbsp;file.text.size()&nbsp;&lt;=&nbsp;<span class="hljs-number" style="line-height: 26px;">0</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//æ²¡æœ‰å†…å®¹</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlBuilder.releases&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;release&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;versionCode(versionCodeMsg)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;versionName(versionNameMsg)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;versionInfo(versionInfoMsg)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//ç›´æ¥å†™å…¥</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file.withWriter&nbsp;{&nbsp;writer&nbsp;-&gt;&nbsp;writer.append(sw.toString())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//å·²æœ‰å…¶å®ƒç‰ˆæœ¬å†…å®¹</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlBuilder.release&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;versionCode(versionCodeMsg)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;versionName(versionNameMsg)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;versionInfo(versionInfoMsg)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//æ’å…¥åˆ°æœ€åä¸€è¡Œå‰é¢</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;lines&nbsp;=&nbsp;file.readLines()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;lengths&nbsp;=&nbsp;lines.size()&nbsp;-&nbsp;<span class="hljs-number" style="line-height: 26px;">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file.withWriter&nbsp;{&nbsp;writer&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lines.eachWithIndex&nbsp;{&nbsp;line,&nbsp;index&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(index&nbsp;!=&nbsp;lengths)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.append(line&nbsp;+&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'\r\n'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">else</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(index&nbsp;==&nbsp;lengths)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.append(<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'\r\r\n'</span>&nbsp;+&nbsp;sw.toString()&nbsp;+&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'\r\n'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.append(lines.get(tlengths))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">é¦–å…ˆï¼Œåœ¨æ³¨é‡Š1å¤„ï¼Œæˆ‘ä»¬ <strong style="font-weight: bold; color: black;">åœ¨æ„é€ å™¨ä¸­é…ç½®äº†è¯¥ Task å¯¹åº”çš„ Task groupï¼Œå³ Task ç»„ï¼Œå¹¶ä¸ºå…¶æ·»åŠ ä¸Šäº†å¯¹åº”çš„æè¿°ä¿¡æ¯</strong>ã€‚æ¥ç€ï¼Œåœ¨æ³¨é‡Š2å¤„ï¼Œæˆ‘ä»¬ <strong style="font-weight: bold; color: black;">ä½¿ç”¨äº† @TaskAction æ³¨è§£æ ‡æ³¨äº† doAction æ–¹æ³•ï¼Œè¿™æ ·å®ƒå°±ä¼šåœ¨ gradle æ‰§è¡Œé˜¶æ®µæ‰§è¡Œ</strong>ã€‚åœ¨æ³¨é‡Š3å¤„ï¼Œæˆ‘ä»¬ <strong style="font-weight: bold; color: black;">ä½¿ç”¨äº† project.extensions.releaseInfo.xxx ä¸€ç³»åˆ— API ä» realeaseInfo Extension å±æ€§ä¸­äº†è·å–ç›¸åº”çš„ç‰ˆæœ¬ä¿¡æ¯</strong>ã€‚æœ€åï¼Œæ³¨é‡Š4å¤„ï¼Œå°±æ˜¯ç”¨æ¥ <strong style="font-weight: bold; color: black;">å®ç°è¯¥ task çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå³å°†å®ä½“å¯¹è±¡å†™å…¥åˆ° xml æ–‡ä»¶ä¸­</strong>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å¯ä»¥çœ‹åˆ°ï¼Œ<strong style="font-weight: bold; color: black;">ä¸€èˆ¬çš„æ’ä»¶ task éƒ½ä¼šéµå¾ªå‰ä¸‰ä¸ªæ­¥éª¤ï¼Œæœ€åä¸€ä¸ªæ­¥éª¤å°±æ˜¯ç”¨æ¥å®ç°æ’ä»¶çš„æ ¸å¿ƒåŠŸèƒ½</strong>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å½“ç„¶ï¼Œæœ€ååˆ«å¿˜äº†åœ¨æˆ‘ä»¬çš„ CustomGradlePlugin çš„ apply æ–¹æ³•ä¸­åŠ å…¥ä¸‹é¢ä»£ç å»åˆ›å»º ReleaseInfoTask å®ä¾‹ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;åˆ›å»ºç”¨äºæ›´æ–°ç‰ˆæœ¬ä¿¡æ¯çš„&nbsp;task</span><br>project.tasks.create(<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"releaseInfoTask"</span>,&nbsp;ReleaseInfoTask.<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">class</span>)<br></code></pre>
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">å››ã€å˜ä½“ï¼ˆVariantsï¼‰çš„ä½œç”¨</span><span class="suffix"></span></h1>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">è¦ç†è§£ Variants çš„ä½œç”¨ï¼Œå°±å¿…é¡»å…ˆäº†è§£ flavorã€dimension ä¸ variant è¿™ä¸‰è€…ä¹‹é—´çš„å…³ç³»ã€‚åœ¨ android gradle plugin V3.x ä¹‹åï¼Œæ¯ä¸ª flavor å¿…é¡»å¯¹åº”ä¸€ä¸ª dimensionï¼Œå¯ä»¥ç†è§£ä¸º flavor çš„åˆ†ç»„ï¼Œç„¶åä¸åŒ dimension é‡Œçš„ flavor ä¼šç»„åˆæˆä¸€ä¸ª variantã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">flavorDimensions&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"size"</span>,&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"color"</span><br><br>productFlavors&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;JsonChao&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dimension&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"size"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;small&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dimension&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"size"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;blue&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dimension&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"color"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;red&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dimension&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"color"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">åœ¨ Android å¯¹ Gradle æ’ä»¶çš„æ‰©å±•æ”¯æŒä¹‹ä¸­ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„ä¾¿æ˜¯ <strong style="font-weight: bold; color: black;">åˆ©ç”¨å˜ä½“ï¼ˆVariantsï¼‰æ¥å¯¹æ„å»ºè¿‡ç¨‹ä¸­çš„å„ä¸ªé»˜è®¤çš„ task è¿›è¡Œ hook</strong>ã€‚å…³äº Variants å…±æœ‰ <strong style="font-weight: bold; color: black;">ä¸‰ç§ç±»å‹</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ï¼‰ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">applicationVariants</code>ï¼š<strong style="font-weight: bold; color: black;">åªé€‚ç”¨äº app plugin</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ï¼‰ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">libraryVariants</code>ï¼š<strong style="font-weight: bold; color: black;">åªé€‚ç”¨äº library plugin</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">3ï¼‰ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">testVariants</code>ï¼š<strong style="font-weight: bold; color: black;">åœ¨ app plugin ä¸ libarary plugin ä¸­éƒ½é€‚ç”¨</strong>ã€‚</section></li></ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">1ã€ä½¿ç”¨ applicationVariants</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ä¸ºäº†è®²è§£ applicationVariants çš„ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåœ¨ app moudle çš„ build.gradle æ–‡ä»¶ä¸­é…ç½®å‡ ä¸ª flavorï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">productFlavors&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;douyin&nbsp;{}<br>&nbsp;&nbsp;&nbsp;&nbsp;weixin&nbsp;{}<br>&nbsp;&nbsp;&nbsp;&nbsp;google&nbsp;{}<br>}<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">1ã€ä½¿ç”¨ applicationVariants.all åœ¨é…ç½®é˜¶æ®µä¹‹åå»è·å–æ‰€æœ‰ variant çš„ name ä¸ baseName</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ <strong style="font-weight: bold; color: black;">ä½¿ç”¨ applicationVariants.all åœ¨é…ç½®é˜¶æ®µä¹‹åå»è·å–æ‰€æœ‰ variant çš„ name ä¸ baseName</strong>ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">this</span>.afterEvaluate&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">this</span>.android.applicationVariants.all&nbsp;{&nbsp;variant&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;name&nbsp;=&nbsp;variant.name<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;baseName&nbsp;=&nbsp;variant.baseName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"name:&nbsp;$name,&nbsp;baseName:&nbsp;$baseName"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">æœ€åï¼Œæ‰§è¡Œ <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">gradle clean task</code>ï¼Œå…¶è¾“å‡ºä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">&gt;&nbsp;Configure&nbsp;project&nbsp;:app<br>name:&nbsp;douyinDebug,&nbsp;baseName:&nbsp;douyin-debug<br>name:&nbsp;douyinRelease,&nbsp;baseName:&nbsp;douyin-release<br>name:&nbsp;weixinDebug,&nbsp;baseName:&nbsp;weixin-debug<br>name:&nbsp;weixinRelease,&nbsp;baseName:&nbsp;weixin-release<br>name:&nbsp;googleDebug,&nbsp;baseName:&nbsp;google-debug<br>name:&nbsp;googleRelease,&nbsp;baseName:&nbsp;google-release<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å¯ä»¥çœ‹åˆ°ï¼Œ<strong style="font-weight: bold; color: black;">name ä¸ baseName çš„åŒºåˆ«ï¼šbaiduDebug ä¸ baidu-debug</strong> ã€‚</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">2ã€ä½¿ç”¨ applicationVariants.all åœ¨é…ç½®é˜¶æ®µä¹‹åå»ä¿®æ”¹è¾“å‡ºçš„ APK åç§°</span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">this</span>.afterEvaluate&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">this</span>.android.applicationVariants.all&nbsp;{&nbsp;variant&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variant.outputs.each&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;ç”±äºæˆ‘ä»¬å½“å‰çš„å˜ä½“æ˜¯&nbsp;application&nbsp;ç±»å‹çš„ï¼Œæ‰€ä»¥</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;è¿™ä¸ª&nbsp;output&nbsp;å°±æ˜¯æˆ‘ä»¬&nbsp;APK&nbsp;æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ï¼Œæˆ‘ä»¬</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;å¯ä»¥é€šè¿‡é‡å‘½åè¿™ä¸ªæ–‡ä»¶æ¥ä¿®æ”¹æˆ‘ä»¬æœ€ç»ˆè¾“å‡ºçš„&nbsp;APK&nbsp;æ–‡ä»¶</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outputFileName&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"app-${variant.baseName}-${variant.versionName}.apk"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;outputFileName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">æ‰§è¡Œ <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">gradle clean task</code>ï¼Œå…¶è¾“å‡ºä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">&gt;&nbsp;Configure&nbsp;project&nbsp;:app<br>app-debug-<span class="hljs-number" style="line-height: 26px;">1.0</span>.apk<br>app-release-<span class="hljs-number" style="line-height: 26px;">1.0</span>.apk<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">3ã€å¯¹ applicationVariants ä¸­çš„ Task è¿›è¡Œ Hook</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">æˆ‘ä»¬å¯ä»¥åœ¨ <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">android.applicationVariants.all</code> çš„é—­åŒ…ä¸­é€šè¿‡ <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">variant.task</code> æ¥è·å–ç›¸åº”çš„ Taskã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">this</span>.afterEvaluate&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">this</span>.android.applicationVariants.all&nbsp;{&nbsp;variant&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">def</span>&nbsp;task&nbsp;=&nbsp;variant.checkManifest<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;task.name<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ç„¶åï¼Œæ‰§è¡Œ <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">gradle clean task</code>ï¼Œå…¶è¾“å‡ºä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">checkDebugManifest<br>checkReleaseManifest<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">æ—¢ç„¶å¯ä»¥è·å–åˆ°å˜ä½“ä¸­çš„ Taskï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ä¸åŒçš„ Task ç±»å‹æ¥åšç‰¹æ®Šå¤„ç†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ variants å»è§£å†³æ’ä»¶åŒ–å¼€å‘ä¸­çš„ç—›ç‚¹ï¼šç¼–å†™ä¸€ä¸ªå¯¹æ’ä»¶åŒ–é¡¹ç›®ä¸­çš„å„ä¸ªæ’ä»¶è‡ªåŠ¨æ›´æ–°çš„è„šæœ¬ï¼Œå…¶æ ¸å¿ƒä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">this</span>.afterEvaluate&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">this</span>.android.applicationVariants.all&nbsp;{&nbsp;variant&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;checkManifest&nbsp;è¿™ä¸ª&nbsp;Task&nbsp;åœ¨&nbsp;Task&nbsp;å®¹å™¨ä¸­</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;é å‰çš„ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œé¢„å…ˆæ›´æ–°æ’ä»¶ã€‚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;checkTask&nbsp;=&nbsp;variant.checkManifest<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkTask.doFirst&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;bt&nbsp;=&nbsp;variant.buildType.<span class="hljs-function" style="line-height: 26px;">name<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">if</span>&nbsp;<span class="hljs-params" style="line-height: 26px;">(bt&nbsp;==&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'qa'</span>&nbsp;||&nbsp;bt&nbsp;==&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'preview'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;bt&nbsp;==&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'release'</span>)</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update_plugin(bt)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">è‡³äº update_plugin çš„å®ç°ï¼Œä¸»è¦å°±æ˜¯ä¸€äº›æ’ä»¶å®‰å…¨æ ¡éªŒä¸ä¸‹è½½çš„é€»è¾‘ï¼Œè¿™éƒ¨åˆ†å…¶å®è·Ÿ Gradle æ²¡æœ‰ä»€ä¹ˆè”ç³»ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥åœ¨ <a href="https://github.com/JsonChao/Awesome-WanAndroid/blob/master/packageplugin.gradle" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">Awesome-WanAndroid</a> é¡¹ç›®ä¸‹æŸ¥çœ‹ã€‚</p>
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">äº”ã€Transform</span><span class="suffix"></span></h1>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ä¼—æ‰€å‘¨çŸ¥ï¼Œ<strong style="font-weight: bold; color: black;">Google å®˜æ–¹åœ¨ Android Gradle V1.5.0 ç‰ˆæœ¬ä»¥åæä¾›äº† Transfrom API, å…è®¸ç¬¬ä¸‰æ–¹ Plugin åœ¨æ‰“åŒ…æˆ .dex æ–‡ä»¶ä¹‹å‰çš„ç¼–è¯‘è¿‡ç¨‹ä¸­æ“ä½œ .class æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å®ç° Transform æ¥å¯¹ .class æ–‡ä»¶éå†ä»¥æ‹¿åˆ°æ‰€æœ‰æ–¹æ³•ï¼Œä¿®æ”¹å®Œæˆåå†å¯¹åŸæ–‡ä»¶è¿›è¡Œæ›¿æ¢å³å¯</strong>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">æ€»çš„æ¥è¯´ï¼ŒGradle Transform çš„åŠŸèƒ½å°±æ˜¯æŠŠè¾“å…¥çš„ .class æ–‡ä»¶è½¬æ¢ä¸ºç›®æ ‡å­—èŠ‚ç æ–‡ä»¶ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ Transform çš„ä¸¤ä¸ªåŸºç¡€æ¦‚å¿µã€‚</p>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">1ã€TransformInput</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;"><strong style="font-weight: bold; color: black;">TransformInput å¯è®¤ä¸ºæ˜¯æ‰€æœ‰è¾“å…¥æ–‡ä»¶çš„ä¸€ä¸ªæŠ½è±¡ï¼Œå®ƒä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ï¼‰ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">DirectoryInput</code> é›†åˆï¼š<strong style="font-weight: bold; color: black;">è¡¨ç¤ºä»¥æºç æ–¹å¼å‚ä¸é¡¹ç›®ç¼–è¯‘çš„æ‰€æœ‰ç›®å½•ç»“æ„ä¸å…¶ç›®å½•ä¸‹çš„æºç æ–‡ä»¶</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ï¼‰ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">JarInput é›†åˆ</code>ï¼š<strong style="font-weight: bold; color: black;">è¡¨ç¤ºä»¥ jar åŒ…æ–¹å¼å‚ä¸é¡¹ç›®ç¼–è¯‘çš„æ‰€æœ‰æœ¬åœ° jar åŒ…å’Œè¿œç¨‹ jar åŒ…ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ª jar æ‰€æŒ‡ä¹ŸåŒ…æ‹¬ aar</strong>ã€‚</section></li></ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">2ã€TransformOutputProvider</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">è¡¨ç¤º Transform çš„è¾“å‡ºï¼Œåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥ <strong style="font-weight: bold; color: black;">è·å–è¾“å‡ºè·¯å¾„ç­‰ä¿¡æ¯</strong>ã€‚</p>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">3ã€å®ç° Transform</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">1ã€é¦–å…ˆï¼Œé…ç½® Android DSL ç›¸å…³çš„ä¾èµ–ï¼š</span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;ç”±äº&nbsp;buildSrc&nbsp;çš„æ‰§è¡Œæ—¶æœºè¦æ—©äºä»»ä½•ä¸€ä¸ª&nbsp;projectï¼Œå› æ­¤éœ€è¦â¾ƒâ¼°æ·»åŠ ä»“åº“&nbsp;</span><br>repositories&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;google()<br>&nbsp;&nbsp;&nbsp;&nbsp;jcenter()&nbsp;<br>}<br><br>dependencies&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;Android&nbsp;DSL</span><br>&nbsp;&nbsp;&nbsp;&nbsp;implementation&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'com.android.tools.build:gradle:3.6.2'</span><br>}<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">2ã€ç„¶åï¼Œç»§æ‰¿ com.android.build.api.transform.Transform ï¼Œåˆ›å»ºâ¼€ä¸ª Transform çš„å­ç±»ï¼š</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å…¶åˆ›å»ºæ­¥éª¤å¯ä»¥ç»†åˆ†ä¸ºäº”æ­¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ï¼‰ã€é‡å†™ getName æ–¹æ³•ï¼šè¿”å›å¯¹åº”çš„ Task åç§°ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ï¼‰ã€é‡å†™ getInputTypes æ–¹æ³•ï¼šç¡®å®šå¯¹é‚£äº›ç±»å‹çš„ç»“æœè¿›è¡Œè½¬æ¢ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">3ï¼‰ã€é‡å†™ getScopes æ–¹æ³•ï¼šæŒ‡å®šæ’ä»¶çš„é€‚ç”¨èŒƒå›´ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">4ï¼‰ã€é‡å†™ isIncremental æ–¹æ³•ï¼šè¡¨ç¤ºæ˜¯å¦æ”¯æŒå¢é‡æ›´æ–°ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">5ï¼‰ã€é‡å†™ transform æ–¹æ³•ï¼šè¿›è¡Œå…·ä½“çš„è½¬æ¢è¿‡ç¨‹ã€‚</section></li></ul>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ä¸‹é¢ğŸ‘‡ï¼Œæˆ‘ä»¬æ¥åˆ†åˆ«æ¥è¿›è¡Œè¯¦ç»†è®²è§£ã€‚</p>
<h4 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content">1ã€é‡å†™ getName æ–¹æ³•ï¼šè¿”å›å¯¹åº”çš„ Task åç§°</span><span class="suffix" style="display: none;"></span></h4>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">æ¯ä¸€ä¸ª Transform éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ Transform taskï¼Œè¿™é‡Œä¾¿æ˜¯è¿”å›çš„ task nameã€‚å®ƒä¼šå‡ºç°åœ¨ app/build/intermediates/transforms ç›®å½•ä¸‹ã€‚å…¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;&nbsp;*&nbsp;æ¯ä¸€ä¸ª&nbsp;Transform&nbsp;éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„&nbsp;Transform&nbsp;taskï¼Œ<br>&nbsp;&nbsp;*&nbsp;è¿™é‡Œä¾¿æ˜¯è¿”å›çš„&nbsp;task&nbsp;nameã€‚å®ƒä¼šå‡ºç°åœ¨<br>&nbsp;&nbsp;*&nbsp;app/build/intermediates/transforms&nbsp;ç›®å½•ä¸‹<br>&nbsp;&nbsp;*<br>&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@return</span>&nbsp;Transform&nbsp;Name<br>&nbsp;&nbsp;*/</span><br>&nbsp;<span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>&nbsp;String&nbsp;getName()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"MyCustomTransform"</span><br>&nbsp;}<br></code></pre>
<h4 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content">2ã€é‡å†™ getInputTypes æ–¹æ³•ï¼šç¡®å®šå¯¹é‚£äº›ç±»å‹çš„ç»“æœè¿›è¡Œè½¬æ¢</span><span class="suffix" style="display: none;"></span></h4>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">getInputTypes æ–¹æ³•ç”¨äºç¡®å®šæˆ‘ä»¬éœ€è¦å¯¹å“ªäº›ç±»å‹çš„ç»“æœè¿›è¡Œè½¬æ¢ï¼šå¦‚å­—èŠ‚ç ã€èµ„æºâ½‚ä»¶ç­‰ç­‰ã€‚ç›®å‰ ContentType æœ‰å…­ç§æšä¸¾ç±»å‹ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨æ¯”è¾ƒé¢‘ç¹çš„æœ‰å‰ä¸¤ç§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">CONTENT_CLASS</code>ï¼š<strong style="font-weight: bold; color: black;">è¡¨ç¤ºéœ€è¦å¤„ç† java çš„ class æ–‡ä»¶</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">CONTENT_JARS</code>ï¼š<strong style="font-weight: bold; color: black;">è¡¨ç¤ºéœ€è¦å¤„ç† java çš„ class ä¸ èµ„æºæ–‡ä»¶</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">3ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">CONTENT_RESOURCES</code>ï¼š<strong style="font-weight: bold; color: black;">è¡¨ç¤ºéœ€è¦å¤„ç† java çš„èµ„æºæ–‡ä»¶</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">4ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">CONTENT_NATIVE_LIBS</code>ï¼š<strong style="font-weight: bold; color: black;">è¡¨ç¤ºéœ€è¦å¤„ç† native åº“çš„ä»£ç </strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">5ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">CONTENT_DEX</code>ï¼š<strong style="font-weight: bold; color: black;">è¡¨ç¤ºéœ€è¦å¤„ç† DEX æ–‡ä»¶</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">6ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">CONTENT_DEX_WITH_RESOURCES</code>ï¼š<strong style="font-weight: bold; color: black;">è¡¨ç¤ºéœ€è¦å¤„ç† DEX ä¸ java çš„èµ„æºæ–‡ä»¶</strong>ã€‚</section></li></ul>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å› ä¸ºæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æ˜¯å­—èŠ‚ç ï¼Œæ‰€ä»¥ç›´æ¥è¿”å› <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">TransformManager.CONTENT_CLASS</code> å³å¯ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;*&nbsp;éœ€è¦å¤„ç†çš„æ•°æ®ç±»å‹ï¼Œç›®å‰&nbsp;ContentType<br>&nbsp;*&nbsp;æœ‰å…­ç§æšä¸¾ç±»å‹ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨æ¯”è¾ƒé¢‘ç¹çš„æœ‰å‰ä¸¤ç§ï¼š<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1ã€CONTENT_CLASSï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;java&nbsp;çš„&nbsp;class&nbsp;æ–‡ä»¶ã€‚<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2ã€CONTENT_JARSï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;java&nbsp;çš„&nbsp;class&nbsp;ä¸&nbsp;èµ„æºæ–‡ä»¶ã€‚<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3ã€CONTENT_RESOURCESï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;java&nbsp;çš„èµ„æºæ–‡ä»¶ã€‚<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4ã€CONTENT_NATIVE_LIBSï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;native&nbsp;åº“çš„ä»£ç ã€‚<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5ã€CONTENT_DEXï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;DEX&nbsp;æ–‡ä»¶ã€‚<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6ã€CONTENT_DEX_WITH_RESOURCESï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;DEX&nbsp;ä¸&nbsp;java&nbsp;çš„èµ„æºæ–‡ä»¶ã€‚&nbsp;<br>&nbsp;*<br>&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@return</span><br>&nbsp;*/</span><br><span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>Set&lt;QualifiedContent.ContentType&gt;&nbsp;getInputTypes()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;ç”¨äºç¡®å®šæˆ‘ä»¬éœ€è¦å¯¹å“ªäº›ç±»å‹çš„ç»“æœè¿›è¡Œè½¬æ¢ï¼šå¦‚å­—èŠ‚ç ã€èµ„æºâ½‚ä»¶ç­‰ç­‰ã€‚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;return&nbsp;TransformManager.RESOURCES</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">return</span>&nbsp;TransformManager.CONTENT_CLASS<br>}<br></code></pre>
<h4 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content">3ã€é‡å†™ getScopes æ–¹æ³•ï¼šæŒ‡å®šæ’ä»¶çš„é€‚ç”¨èŒƒå›´</span><span class="suffix" style="display: none;"></span></h4>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">getScopes æ–¹æ³•åˆ™æ˜¯ç”¨äºç¡®å®šæ’ä»¶çš„é€‚ç”¨èŒƒå›´ï¼šç›®å‰ Scope æœ‰ <strong style="font-weight: bold; color: black;">äº”ç§åŸºæœ¬ç±»å‹</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">PROJECT</code>ï¼šåªæœ‰é¡¹ç›®å†…å®¹ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">SUB_PROJECTS</code>ï¼šåªæœ‰å­é¡¹ç›®ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">3ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">EXTERNAL_LIBRARIES</code>ï¼šåªæœ‰å¤–éƒ¨åº“ï¼Œ</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">4ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">TESTED_CODE</code>ï¼šç”±å½“å‰å˜ä½“ï¼ˆåŒ…æ‹¬ä¾èµ–é¡¹ï¼‰æ‰€æµ‹è¯•çš„ä»£ç ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">5ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">PROVIDED_ONLY</code>ï¼šåªæä¾›æœ¬åœ°æˆ–è¿œç¨‹ä¾èµ–é¡¹ã€‚</section></li></ul>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¤åˆç±»å‹ï¼Œå®ƒä»¬æ˜¯éƒ½æ˜¯ç”±è¿™äº”ç§åŸºæœ¬ç±»å‹ç»„æˆï¼Œä»¥å®ç°çµæ´»ç¡®å®šè‡ªå®šä¹‰æ’ä»¶çš„èŒƒå›´ï¼Œè¿™é‡Œé€šå¸¸æ˜¯æŒ‡å®šæ•´ä¸ª projectï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶å®ƒèŒƒå›´ï¼Œå…¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;*&nbsp;è¡¨ç¤º&nbsp;Transform&nbsp;è¦æ“ä½œçš„å†…å®¹èŒƒå›´ï¼Œç›®å‰&nbsp;Scope&nbsp;æœ‰äº”ç§åŸºæœ¬ç±»å‹ï¼š<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1ã€PROJECT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åªæœ‰é¡¹ç›®å†…å®¹<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2ã€SUB_PROJECTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åªæœ‰å­é¡¹ç›®<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3ã€EXTERNAL_LIBRARIES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åªæœ‰å¤–éƒ¨åº“<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4ã€TESTED_CODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”±å½“å‰å˜ä½“ï¼ˆåŒ…æ‹¬ä¾èµ–é¡¹ï¼‰æ‰€æµ‹è¯•çš„ä»£ç <br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5ã€PROVIDED_ONLY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åªæä¾›æœ¬åœ°æˆ–è¿œç¨‹ä¾èµ–é¡¹<br>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SCOPE_FULL_PROJECT&nbsp;æ˜¯ä¸€ä¸ª&nbsp;Scope&nbsp;é›†åˆï¼ŒåŒ…å«&nbsp;Scope.PROJECT,<br>Scope.SUB_PROJECTS,&nbsp;Scope.EXTERNAL_LIBRARIES&nbsp;è¿™ä¸‰é¡¹ï¼Œå³å½“å‰&nbsp;Transform<br>çš„ä½œç”¨åŸŸåŒ…æ‹¬å½“å‰é¡¹ç›®ã€å­é¡¹ç›®ä»¥åŠå¤–éƒ¨çš„ä¾èµ–åº“<br>&nbsp;*<br>&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@return</span><br>&nbsp;*/</span><br><span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>Set&lt;?&nbsp;super&nbsp;QualifiedContent.Scope&gt;&nbsp;getScopes()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;é€‚ç”¨èŒƒå›´ï¼šé€šå¸¸æ˜¯æŒ‡å®šæ•´ä¸ª&nbsp;projectï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶å®ƒèŒƒå›´<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;TransformManager.SCOPE_FULL_PROJECT<br>}<br></code></pre>
<h4 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content">4ã€é‡å†™ isIncremental æ–¹æ³•ï¼šè¡¨ç¤ºæ˜¯å¦æ”¯æŒå¢é‡æ›´æ–°</span><span class="suffix" style="display: none;"></span></h4>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">isIncremental æ–¹æ³•ç”¨äºç¡®å®šæ˜¯å¦æ”¯æŒå¢é‡æ›´æ–°ï¼Œå¦‚æœè¿”å› trueï¼ŒTransformInput ä¼šåŒ…å«ä¸€ä»½ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¦‚æœè¿”å› falseï¼Œåˆ™ä¼šè¿›è¡Œå…¨é‡ç¼–è¯‘ï¼Œå¹¶ä¸”ä¼šåˆ é™¤ä¸Šä¸€æ¬¡çš„è¾“å‡ºå†…å®¹ã€‚</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">boolean</span>&nbsp;isIncremental()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;æ˜¯å¦æ”¯æŒå¢é‡æ›´æ–°</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;å¦‚æœè¿”å›&nbsp;trueï¼ŒTransformInput&nbsp;ä¼šåŒ…å«ä¸€ä»½ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;å¦‚æœè¿”å›&nbsp;falseï¼Œä¼šè¿›è¡Œå…¨é‡ç¼–è¯‘ï¼Œåˆ é™¤ä¸Šä¸€æ¬¡çš„è¾“å‡ºå†…å®¹</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-literal" style="color: #f92672; font-weight: bold; line-height: 26px;">false</span><br>}<br></code></pre>
<h4 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content">5ã€é‡å†™ transform æ–¹æ³•ï¼šè¿›è¡Œå…·ä½“çš„è½¬æ¢è¿‡ç¨‹</span><span class="suffix" style="display: none;"></span></h4>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">åœ¨ transform æ–¹æ³•ä¸­ï¼Œå°±æ˜¯ç”¨æ¥ç»™æˆ‘ä»¬è¿›è¡Œå…·ä½“çš„è½¬æ¢è¿‡ç¨‹çš„ã€‚å…¶å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;*&nbsp;è¿›è¡Œå…·ä½“çš„è½¬æ¢è¿‡ç¨‹<br>&nbsp;*<br>&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@param</span>&nbsp;transformInvocation<br>&nbsp;*/</span><br><span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">void</span>&nbsp;transform(TransformInvocation&nbsp;transformInvocation)&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">throws</span><br>TransformException,&nbsp;InterruptedException,&nbsp;IOException&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">super</span>.transform(transformInvocation)<br>&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'---------------&nbsp;MyTransform&nbsp;visit&nbsp;start&nbsp;---------------&nbsp;'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">def</span>&nbsp;startTime&nbsp;=&nbsp;System.currentTimeMillis()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">def</span>&nbsp;inputs&nbsp;=&nbsp;transformInvocation.inputs<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">def</span>&nbsp;outputProvider&nbsp;=&nbsp;transformInvocation.outputProvider<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;1ã€åˆ é™¤ä¹‹å‰çš„è¾“å‡º</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(outputProvider&nbsp;!=&nbsp;<span class="hljs-literal" style="color: #f92672; font-weight: bold; line-height: 26px;">null</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outputProvider.deleteAll()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;Transform&nbsp;çš„&nbsp;inputs&nbsp;æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯ç›®å½•ï¼Œä¸€ç§æ˜¯&nbsp;jar</span><br>åŒ…ï¼Œè¦åˆ†å¼€éå†<br>&nbsp;&nbsp;&nbsp;&nbsp;inputs.each&nbsp;{&nbsp;TransformInput&nbsp;input&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;2ã€éå†&nbsp;directoryInputsï¼ˆæœ¬åœ°&nbsp;project&nbsp;ç¼–è¯‘æˆçš„å¤šä¸ª&nbsp;class</span><br>â½‚ä»¶å­˜æ”¾çš„ç›®å½•ï¼‰<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input.directoryInputs.each&nbsp;{&nbsp;DirectoryInput&nbsp;directoryInput&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleDirectory(directoryInput,&nbsp;outputProvider)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;3ã€éå†&nbsp;jarInputsï¼ˆå„ä¸ªä¾èµ–æ‰€ç¼–è¯‘æˆçš„&nbsp;jar&nbsp;æ–‡ä»¶ï¼‰</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input.jarInputs.each&nbsp;{&nbsp;JarInput&nbsp;jarInput&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleJar(jarInput,&nbsp;outputProvider)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">def</span>&nbsp;cost&nbsp;=&nbsp;(System.currentTimeMillis()&nbsp;-&nbsp;startTime)&nbsp;/&nbsp;<span class="hljs-number" style="line-height: 26px;">1000</span><br>&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'---------------&nbsp;MyTransform&nbsp;visit&nbsp;end&nbsp;---------------&nbsp;'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"MyTransform&nbsp;cost&nbsp;ï¼š&nbsp;$cost&nbsp;s"</span><br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">è¿™é‡Œæˆ‘ä»¬ä¸»è¦æ˜¯åšäº†ä¸‰æ­¥å¤„ç†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ï¼‰ã€åˆ é™¤ä¹‹å‰çš„è¾“å‡ºã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ï¼‰ã€éå† directoryInputsï¼ˆæœ¬åœ° project ç¼–è¯‘æˆçš„å¤šä¸ª class
â½‚ä»¶å­˜æ”¾çš„ç›®å½•ï¼‰ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">3ï¼‰ã€éå† jarInputsï¼ˆå„ä¸ªä¾èµ–æ‰€ç¼–è¯‘æˆçš„ jar æ–‡ä»¶ï¼‰ã€‚</section></li></ul>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">åœ¨ handleDirectory ä¸ handleJar æ–¹æ³•ä¸­åˆ™æ˜¯è¿›è¡Œäº†ç›¸åº”çš„ æ–‡ä»¶å¤„ç† &amp;&amp; ASM å­—èŠ‚ç ä¿®æ”¹ã€‚è¿™é‡Œæˆ‘ç›´æ¥æ”¾å‡º Transform çš„é€šç”¨æ¨¡æ¿ä»£ç ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">MyTransform</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">extends</span>&nbsp;<span class="hljs-title" style="font-weight: bold; color: white; line-height: 26px;">Transform</span>&nbsp;</span>{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;æ¯ä¸€ä¸ª&nbsp;Transform&nbsp;éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„&nbsp;Transform&nbsp;taskï¼Œ<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;è¿™é‡Œä¾¿æ˜¯è¿”å›çš„&nbsp;task&nbsp;nameã€‚å®ƒä¼šå‡ºç°åœ¨&nbsp;app/build/intermediates/transforms&nbsp;ç›®å½•ä¸‹<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@return</span>&nbsp;Transform&nbsp;Name<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;">String&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">getName</span><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"MyCustomTransform"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;éœ€è¦å¤„ç†çš„æ•°æ®ç±»å‹ï¼Œç›®å‰&nbsp;ContentType&nbsp;æœ‰å…­ç§æšä¸¾ç±»å‹ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨æ¯”è¾ƒé¢‘ç¹çš„æœ‰å‰ä¸¤ç§ï¼š<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1ã€CONTENT_CLASSï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;java&nbsp;çš„&nbsp;class&nbsp;æ–‡ä»¶ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2ã€CONTENT_JARSï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;java&nbsp;çš„&nbsp;class&nbsp;ä¸&nbsp;èµ„æºæ–‡ä»¶ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3ã€CONTENT_RESOURCESï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;java&nbsp;çš„èµ„æºæ–‡ä»¶ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4ã€CONTENT_NATIVE_LIBSï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;native&nbsp;åº“çš„ä»£ç ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5ã€CONTENT_DEXï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;DEX&nbsp;æ–‡ä»¶ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6ã€CONTENT_DEX_WITH_RESOURCESï¼šè¡¨ç¤ºéœ€è¦å¤„ç†&nbsp;DEX&nbsp;ä¸&nbsp;java&nbsp;çš„èµ„æºæ–‡ä»¶ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Set&lt;QualifiedContent.ContentType&gt;&nbsp;getInputTypes()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;ç”¨äºç¡®å®šæˆ‘ä»¬éœ€è¦å¯¹å“ªäº›ç±»å‹çš„ç»“æœè¿›è¡Œè½¬æ¢ï¼šå¦‚å­—èŠ‚ç ã€èµ„æºâ½‚ä»¶ç­‰ç­‰ã€‚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;return&nbsp;TransformManager.RESOURCES</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">return</span>&nbsp;TransformManager.CONTENT_CLASS<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;è¡¨ç¤º&nbsp;Transform&nbsp;è¦æ“ä½œçš„å†…å®¹èŒƒå›´ï¼Œç›®å‰&nbsp;Scope&nbsp;æœ‰äº”ç§åŸºæœ¬ç±»å‹ï¼š<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1ã€PROJECT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åªæœ‰é¡¹ç›®å†…å®¹<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2ã€SUB_PROJECTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åªæœ‰å­é¡¹ç›®<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3ã€EXTERNAL_LIBRARIES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åªæœ‰å¤–éƒ¨åº“<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4ã€TESTED_CODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”±å½“å‰å˜ä½“ï¼ˆåŒ…æ‹¬ä¾èµ–é¡¹ï¼‰æ‰€æµ‹è¯•çš„ä»£ç <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5ã€PROVIDED_ONLY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åªæä¾›æœ¬åœ°æˆ–è¿œç¨‹ä¾èµ–é¡¹<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SCOPE_FULL_PROJECT&nbsp;æ˜¯ä¸€ä¸ª&nbsp;Scope&nbsp;é›†åˆï¼ŒåŒ…å«&nbsp;Scope.PROJECT,&nbsp;Scope.SUB_PROJECTS,&nbsp;Scope.EXTERNAL_LIBRARIES&nbsp;è¿™ä¸‰é¡¹ï¼Œå³å½“å‰&nbsp;Transform&nbsp;çš„ä½œç”¨åŸŸåŒ…æ‹¬å½“å‰é¡¹ç›®ã€å­é¡¹ç›®ä»¥åŠå¤–éƒ¨çš„ä¾èµ–åº“<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>&nbsp;&nbsp;&nbsp;&nbsp;Set&lt;?&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">super</span>&nbsp;QualifiedContent.Scope&gt;&nbsp;getScopes()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;é€‚ç”¨èŒƒå›´ï¼šé€šå¸¸æ˜¯æŒ‡å®šæ•´ä¸ª&nbsp;projectï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶å®ƒèŒƒå›´</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">return</span>&nbsp;TransformManager.SCOPE_FULL_PROJECT<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">boolean</span>&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">isIncremental</span><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;æ˜¯å¦æ”¯æŒå¢é‡æ›´æ–°</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;å¦‚æœè¿”å›&nbsp;trueï¼ŒTransformInput&nbsp;ä¼šåŒ…å«ä¸€ä»½ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;å¦‚æœè¿”å›&nbsp;falseï¼Œä¼šè¿›è¡Œå…¨é‡ç¼–è¯‘ï¼Œåˆ é™¤ä¸Šä¸€æ¬¡çš„è¾“å‡ºå†…å®¹</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">false</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;è¿›è¡Œå…·ä½“çš„è½¬æ¢è¿‡ç¨‹<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@param</span>&nbsp;transformInvocation<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta" style="color: #75715e; line-height: 26px;">@Override</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">void</span>&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">transform</span><span class="hljs-params" style="line-height: 26px;">(TransformInvocation&nbsp;transformInvocation)</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">throws</span>&nbsp;TransformException,&nbsp;InterruptedException,&nbsp;IOException&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">super</span>.transform(transformInvocation)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'---------------&nbsp;MyTransform&nbsp;visit&nbsp;start&nbsp;---------------&nbsp;'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;startTime&nbsp;=&nbsp;System.currentTimeMillis()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;inputs&nbsp;=&nbsp;transformInvocation.inputs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;outputProvider&nbsp;=&nbsp;transformInvocation.outputProvider<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;åˆ é™¤ä¹‹å‰çš„è¾“å‡º</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(outputProvider&nbsp;!=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">null</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outputProvider.deleteAll()<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;Transform&nbsp;çš„&nbsp;inputs&nbsp;æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯ç›®å½•ï¼Œä¸€ç§æ˜¯&nbsp;jar&nbsp;åŒ…ï¼Œè¦åˆ†å¼€éå†</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs.each&nbsp;{&nbsp;TransformInput&nbsp;input&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;éå†&nbsp;directoryInputsï¼ˆæœ¬åœ°&nbsp;project&nbsp;ç¼–è¯‘æˆçš„å¤šä¸ª&nbsp;class&nbsp;â½‚ä»¶å­˜æ”¾çš„ç›®å½•ï¼‰</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input.directoryInputs.each&nbsp;{&nbsp;DirectoryInput&nbsp;directoryInput&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleDirectory(directoryInput,&nbsp;outputProvider)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;éå†&nbsp;jarInputsï¼ˆå„ä¸ªä¾èµ–æ‰€ç¼–è¯‘æˆçš„&nbsp;jar&nbsp;æ–‡ä»¶ï¼‰</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input.jarInputs.each&nbsp;{&nbsp;JarInput&nbsp;jarInput&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleJar(jarInput,&nbsp;outputProvider)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;cost&nbsp;=&nbsp;(System.currentTimeMillis()&nbsp;-&nbsp;startTime)&nbsp;/&nbsp;<span class="hljs-number" style="line-height: 26px;">1000</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'---------------&nbsp;MyTransform&nbsp;visit&nbsp;end&nbsp;---------------&nbsp;'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"MyTransform&nbsp;cost&nbsp;ï¼š&nbsp;$cost&nbsp;s"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">static</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">void</span>&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">handleJar</span><span class="hljs-params" style="line-height: 26px;">(JarInput&nbsp;jarInput,&nbsp;TransformOutputProvider&nbsp;outputProvider)</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(jarInput.file.getAbsolutePath().endsWith(<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">".jar"</span>))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;æˆªå–æ–‡ä»¶è·¯å¾„çš„&nbsp;md5&nbsp;å€¼é‡å‘½åè¾“å‡ºæ–‡ä»¶ï¼Œé¿å…å‡ºç°åŒåè€Œè¦†ç›–çš„æƒ…å†µå‡ºç°</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;jarName&nbsp;=&nbsp;jarInput.name<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;md5Name&nbsp;=&nbsp;DigestUtils.md5Hex(jarInput.file.getAbsolutePath())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(jarName.endsWith(<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">".jar"</span>))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarName&nbsp;=&nbsp;jarName.substring(<span class="hljs-number" style="line-height: 26px;">0</span>,&nbsp;jarName.length()&nbsp;-&nbsp;<span class="hljs-number" style="line-height: 26px;">4</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JarFile&nbsp;jarFile&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;JarFile(jarInput.file)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enumeration&nbsp;enumeration&nbsp;=&nbsp;jarFile.entries()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;tmpFile&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;File(jarInput.file.getParent()&nbsp;+&nbsp;File.separator&nbsp;+&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"classes_temp.jar"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;é¿å…ä¸Šæ¬¡çš„ç¼“å­˜è¢«é‡å¤æ’å…¥</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(tmpFile.exists())&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmpFile.delete()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JarOutputStream&nbsp;jarOutputStream&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;JarOutputStream(<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;FileOutputStream(tmpFile))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">while</span>&nbsp;(enumeration.hasMoreElements())&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JarEntry&nbsp;jarEntry&nbsp;=&nbsp;(JarEntry)&nbsp;enumeration.nextElement()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;entryName&nbsp;=&nbsp;jarEntry.getName()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZipEntry&nbsp;zipEntry&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;ZipEntry(entryName)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;inputStream&nbsp;=&nbsp;jarFile.getInputStream(jarEntry)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(checkClassFile(entryName))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;ä½¿ç”¨&nbsp;ASM&nbsp;å¯¹&nbsp;class&nbsp;æ–‡ä»¶è¿›è¡Œæ“æ§</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'-----------&nbsp;deal&nbsp;with&nbsp;"jar"&nbsp;class&nbsp;file&nbsp;&lt;'</span>&nbsp;+&nbsp;entryName&nbsp;+&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'&gt;&nbsp;-----------'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarOutputStream.putNextEntry(zipEntry)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassReader&nbsp;classReader&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;ClassReader(IOUtils.toByteArray(inputStream))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassWriter&nbsp;classWriter&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;ClassWriter(classReader,&nbsp;org.objectweb.asm.ClassWriter.COMPUTE_MAXS)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassVisitor&nbsp;cv&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;MyCustomClassVisitor(classWriter)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classReader.accept(cv,&nbsp;EXPAND_FRAMES)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">byte</span>[]&nbsp;code&nbsp;=&nbsp;classWriter.toByteArray()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarOutputStream.write(code)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarOutputStream.putNextEntry(zipEntry)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarOutputStream.write(IOUtils.toByteArray(inputStream))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarOutputStream.closeEntry()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarOutputStream.close()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarFile.close()<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;ç”Ÿæˆè¾“å‡ºè·¯å¾„&nbsp;destï¼š./app/build/intermediates/transforms/xxxTransform/...</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;dest&nbsp;=&nbsp;outputProvider.getContentLocation(jarName&nbsp;+&nbsp;md5Name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarInput.contentTypes,&nbsp;jarInput.scopes,&nbsp;Format.JAR)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;å°†&nbsp;input&nbsp;çš„ç›®å½•å¤åˆ¶åˆ°&nbsp;output&nbsp;æŒ‡å®šç›®å½•</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileUtils.copyFile(tmpFile,&nbsp;dest)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmpFile.delete()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">static</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">void</span>&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">handleDirectory</span><span class="hljs-params" style="line-height: 26px;">(DirectoryInput&nbsp;directoryInput,&nbsp;TransformOutputProvider&nbsp;outputProvider)</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;åœ¨å¢é‡æ¨¡å¼ä¸‹å¯ä»¥é€šè¿‡&nbsp;directoryInput.changedFiles&nbsp;æ–¹æ³•è·å–ä¿®æ”¹çš„æ–‡ä»¶</span><br><span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directoryInput.changedFiles</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(directoryInput.file.size()&nbsp;==&nbsp;<span class="hljs-number" style="line-height: 26px;">0</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">if</span>&nbsp;(directoryInput.file.isDirectory())&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**éå†ä»¥æŸä¸€æ‰©å±•åç»“å°¾çš„æ–‡ä»¶*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directoryInput.file.traverse(type:&nbsp;FileType.FILES,&nbsp;nameFilter:&nbsp;~/.*\.class/)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;classFile&nbsp;-&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;name&nbsp;=&nbsp;classFile.<span class="hljs-function" style="line-height: 26px;">name<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">if</span>&nbsp;<span class="hljs-params" style="line-height: 26px;">(checkClassFile(name)</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'-----------&nbsp;deal&nbsp;with&nbsp;"class"&nbsp;file&nbsp;&lt;'</span>&nbsp;+&nbsp;name&nbsp;+&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'&gt;&nbsp;-----------'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;classReader&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;ClassReader(classFile.bytes)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;classWriter&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;ClassWriter(classReader,&nbsp;ClassWriter.COMPUTE_MAXS)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;classVisitor&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;MyCustomClassVisitor(classWriter)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classReader.accept(classVisitor,&nbsp;EXPAND_FRAMES)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">byte</span>[]&nbsp;codeBytes&nbsp;=&nbsp;classWriter.toByteArray()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileOutputStream&nbsp;fileOutputStream&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;FileOutputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classFile.parentFile.absolutePath&nbsp;+&nbsp;File.separator&nbsp;+&nbsp;name<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileOutputStream.write(codeBytes)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileOutputStream.close()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">///&nbsp;è·å–&nbsp;output&nbsp;ç›®å½•&nbsp;destï¼š./app/build/intermediates/transforms/hencoderTransform/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;destFile&nbsp;=&nbsp;outputProvider.getContentLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directoryInput.name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directoryInput.contentTypes,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directoryInput.scopes,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Format.DIRECTORY<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;å°†&nbsp;input&nbsp;çš„ç›®å½•å¤åˆ¶åˆ°&nbsp;output&nbsp;æŒ‡å®šç›®å½•</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileUtils.copyDirectory(directoryInput.file,&nbsp;destFile)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;æ£€æŸ¥&nbsp;class&nbsp;æ–‡ä»¶æ˜¯å¦éœ€è¦å¤„ç†<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@param</span>&nbsp;fileName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag" style="font-weight: bold; line-height: 26px;">@return</span>&nbsp;class&nbsp;æ–‡ä»¶æ˜¯å¦éœ€è¦å¤„ç†<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">static</span>&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">boolean</span>&nbsp;<span class="hljs-title" style="color: #a6e22e; font-weight: bold; line-height: 26px;">checkClassFile</span><span class="hljs-params" style="line-height: 26px;">(String&nbsp;name)</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;åªå¤„ç†éœ€è¦çš„&nbsp;class&nbsp;æ–‡ä»¶</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">return</span>&nbsp;(name.endsWith(<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">".class"</span>)&nbsp;&amp;&amp;&nbsp;!name.startsWith(<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"R\$"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"R.class"</span>&nbsp;!=&nbsp;name&nbsp;&amp;&amp;&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"BuildConfig.class"</span>&nbsp;!=&nbsp;name<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"android/support/v4/app/FragmentActivity.class"</span>&nbsp;==&nbsp;name)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ç¼–å†™å®Œ Transform çš„ä»£ç ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ <strong style="font-weight: bold; color: black;">åœ¨ CustomGradlePlugin çš„ apply æ–¹æ³•ä¸­åŠ å…¥ä¸‹é¢ä»£ç å»æ³¨å†Œ MyTransform å®ä¾‹</strong>ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;"><span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;æ³¨å†Œæˆ‘ä»¬è‡ªå®šä¹‰çš„&nbsp;Transform</span><br><span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">def</span>&nbsp;appExtension&nbsp;=&nbsp;project.extensions.findByType(AppExtension.<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">class</span>)<br>appExtension.registerTransform(<span class="hljs-keyword" style="color: #f92672; font-weight: bold; line-height: 26px;">new</span>&nbsp;MyTransform());<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;"><strong style="font-weight: bold; color: black;">ä¸Šé¢çš„è‡ªå®šä¹‰ Transform çš„ä»£ç å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ Transorm + ASM ä¿®æ”¹å­—èŠ‚ç çš„æ¨¡æ¿ä»£ç ï¼Œåœ¨ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™æˆ‘ä»¬è‡ªå·±çš„ MyClassVisitor ç±»å»ä¿®æ”¹ç›¸åº”çš„å­—èŠ‚ç æ–‡ä»¶å³å¯</strong>ï¼Œå…³äº ASM çš„ä½¿ç”¨å¯ä»¥å‚è€ƒæˆ‘å‰é¢å†™çš„ <a href="https://juejin.im/post/6844904118700474375" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">æ·±å…¥æ¢ç´¢ç¼–è¯‘æ’æ¡©æŠ€æœ¯ï¼ˆå››ã€ASM æ¢ç§˜ï¼‰</a> ä¸€æ–‡ã€‚</p>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">6ã€Transform ä½¿ç”¨å°ç»“</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;"><strong style="font-weight: bold; color: black;">æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ª Gradle Pluginï¼Œç„¶åæ³¨å†Œä¸€ä¸ª Transform å¯¹è±¡ï¼Œåœ¨ tranform æ–¹æ³•é‡Œï¼Œå¯ä»¥åˆ†åˆ«éå†ç›®å½•å’Œ jar åŒ…ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥éå†å½“å‰åº”ç”¨ç¨‹åºçš„æ‰€æœ‰ .class æ–‡ä»¶ï¼Œç„¶ååœ¨åˆ©ç”¨ ASM æ¡†æ¶çš„ Core API å»åŠ è½½ç›¸åº”çš„ .class æ–‡ä»¶ï¼Œå¹¶è§£æï¼Œå°±å¯ä»¥æ‰¾åˆ°æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„ .class æ–‡ä»¶å’Œç›¸å…³æ–¹æ³•ï¼Œæœ€åå»ä¿®æ”¹ç›¸åº”çš„æ–¹æ³•ä»¥å®ç°åŠ¨æ€æ’å…¥ç›¸åº”çš„å­—èŠ‚ç </strong>ã€‚</p>
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">å…­ã€å‘å¸ƒ Gradle æ’ä»¶</span><span class="suffix"></span></h1>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å‘å¸ƒæ’ä»¶å¯ä»¥åˆ†ä¸º <strong style="font-weight: bold; color: black;">ä¸¤ç§å½¢å¼</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ï¼‰ã€<strong style="font-weight: bold; color: black;">å‘å¸ƒæ’ä»¶åˆ°æœ¬åœ°ä»“åº“</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ï¼‰ã€<strong style="font-weight: bold; color: black;">å‘å¸ƒæ’ä»¶åˆ°è¿œç¨‹ä»“åº“</strong>ã€‚</section></li></ul>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥ä½¿ç”¨ <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">mavenDeployer</code> æ’ä»¶æ¥å°†æ’ä»¶åˆ†åˆ«å‘å¸ƒåœ¨æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“ã€‚</p>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">1ã€å‘å¸ƒæ’ä»¶åˆ°æœ¬åœ°ä»“åº“</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å¼•å…¥ maven æ’ä»¶ä¹‹åï¼Œæˆ‘ä»¬ <strong style="font-weight: bold; color: black;">åœ¨ uploadArchives åŠ å…¥æƒ³è¦ä¸Šä¼ çš„ä»“åº“åœ°å€ä¸ç›¸å…³é…ç½®å³å¯ï¼Œè¿™æ · Gradle åœ¨æ‰§è¡Œ uploadArchives æ—¶å°†ç”Ÿæˆå’Œä¸Šä¼  pom.xml æ–‡ä»¶</strong>ï¼Œå°†æ’ä»¶ä¸Šä¼ è‡³æœ¬åœ°ä»“åº“çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">apply&nbsp;plugin:&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'maven'</span><br><br>uploadArchives&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;repositories&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenDeployer&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #75715e; line-height: 26px;">//&nbsp;ä¸Šä¼ åˆ°å½“å‰é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„æœ¬åœ°&nbsp;repo&nbsp;ç›®å½•ä¸­</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repository(url:&nbsp;uri(<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'../repo'</span>))<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pom.groupId&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'com.json.chao.study'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pom.artifactId&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'custom-gradle-plugin'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pom.version&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'1.0.0'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬å°†æœ¬åœ°ä»“åº“è·¯å¾„æŒ‡å®šä¸ºäº†æ ¹ç›®å½•ä¸‹çš„ repo æ–‡ä»¶å¤¹ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ’ä»¶ä¸­çš„ä¸€äº›å±æ€§ä¿¡æ¯ï¼Œé€šå¸¸åŒ…å«å¦‚ä¸‹ä¸‰ç§ï¼š</p>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">1ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">groupId</code>ï¼š<strong style="font-weight: bold; color: black;">ç»„ç»‡/å…¬å¸åç§°</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">2ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">artifactId</code>ï¼š<strong style="font-weight: bold; color: black;">é¡¹ç›®/æ¨¡å—åç§°</strong>ã€‚</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">3ã€<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">version</code>ï¼š<strong style="font-weight: bold; color: black;">é¡¹ç›®/æ¨¡å—çš„å½“å‰ç‰ˆæœ¬å·</strong>ã€‚</section></li></ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">2ã€å‘å¸ƒæ’ä»¶åˆ°è¿œç¨‹ä»“åº“</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">apply&nbsp;plugin:&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'maven'</span><br><br>uploadArchives&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;configuration&nbsp;=&nbsp;configurations.archives<br>&nbsp;&nbsp;&nbsp;&nbsp;repositories&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mavenDeployer&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repository(url:&nbsp;MAVEN_REPO_RELEASE_URL)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authentication(userName:&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"JsonChao"</span>,&nbsp;password:&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">"123456"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pom.groupId&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'com.json.chao.study'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pom.artifactId&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'custom-gradle-plugin'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pom.version&nbsp;=&nbsp;<span class="hljs-string" style="color: #a6e22e; line-height: 26px;">'1.0.0'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">ä¸åŒäºå‘å¸ƒæ’ä»¶åˆ°æœ¬åœ°ä»“åº“çš„æ–¹å¼ï¼Œ<strong style="font-weight: bold; color: black;">å‘å¸ƒæ’ä»¶åˆ°è¿œç¨‹ä»“åº“ä»…ä»…æ˜¯å°† repository ä¸­çš„ url æ›¿æ¢ä¸º è¿œç¨‹ maven ä»“åº“çš„ urlï¼Œå¹¶å°†éœ€è¦è®¤è¯çš„ userName ä¸ password è¿›è¡Œé…ç½®å³å¯</strong>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">å°†æ’ä»¶é…ç½®å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">./gradlew uploadArchivers</code> æ¥æ‰§è¡Œè¿™ä¸ª taskï¼Œå®ç°å°†æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ°/è¿œç¨‹ä»“åº“ã€‚</p>
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">ä¸ƒã€è°ƒè¯• Gradle æ’ä»¶</span><span class="suffix"></span></h1>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">1ã€é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ AndroidStudio ä¸­å¢åŠ ä¸€ä¸ª Remote é…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</span><span class="suffix" style="display: none;"></span></h3>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px;"><img src="https://user-gold-cdn.xitu.io/2020/4/22/171a14a1678ea46b?w=724&amp;h=398&amp;f=png&amp;s=84519" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px;"><img src="https://user-gold-cdn.xitu.io/2020/4/22/171a14a167740a92?w=2140&amp;h=1350&amp;f=png&amp;s=356584" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px;"><img src="https://user-gold-cdn.xitu.io/2020/4/22/171a14a1679187a8?w=2144&amp;h=1350&amp;f=png&amp;s=254325" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">æœ€åï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥æ’ä»¶çš„ Name å³å¯ï¼Œæˆ‘ä»¬è¿™é‡Œçš„æ’ä»¶åå­—æ˜¯ plugin-releaseã€‚</p>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">2ã€åœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤å¼€å¯ debug è°ƒè¯•ç›¸åº”çš„ Taskï¼ˆè°ƒè¯•çš„ task ä¸­æ¯”è¾ƒå¤šçš„æ˜¯ assembleRelease è¿™ä¸ª Taskï¼Œå› ä¸ºæˆ‘ä»¬æœ€å¸¸åšçš„å°±æ˜¯å¯¹æ‰“åŒ…æµç¨‹è¿›è¡Œ Hookï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://imgkr.cn-bj.ufileos.com/97e4eed2-a992-4976-acf0-ccb6fb34d308.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;">.<span class="hljs-regexp" style="color: #bf79db; line-height: 26px;">/gradlew&nbsp;--no-daemon&nbsp;-Dorg.gradle.debug=true&nbsp;:app:assembleRelease<br></span></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">3ã€æœ€åï¼Œæˆ‘ä»¬åœ¨æ’ä»¶ä»£ç ä¸­æ‰“å¥½ç›¸åº”çš„æ–­ç‚¹ï¼Œé€‰ä¸­æˆ‘ä»¬ä¸Šä¸€æ­¥åˆ›å»ºçš„ Remote é…ç½®ï¼Œç‚¹å‡» Debug æŒ‰é’®å³å¯å¼€å§‹è°ƒè¯•æˆ‘ä»¬çš„è‡ªå®šä¹‰æ’ä»¶ä»£ç äº†ã€‚</span><span class="suffix" style="display: none;"></span></h3>
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">å…«ã€æ€»ç»“</span><span class="suffix"></span></h1>
<p data-tool="mdniceç¼–è¾‘å™¨" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª Gradle æ’ä»¶ï¼Œå¦‚æœä½ è¿˜æ²¡åˆ›å»ºä¸€ä¸ªå±äºè‡ªå·±çš„è‡ªå®šä¹‰ Gradle æ’ä»¶ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ å»å°è¯•ä¸€ä¸‹ã€‚å½“ç„¶ï¼Œä»…ä»…ä¼šåˆ¶é€ ä¸€ä¸ªè‡ªå®šä¹‰ Gradle æ’ä»¶è¿˜è¿œè¿œä¸å¤Ÿï¼Œåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¥å…¨æ–¹ä½åœ°æ·±å…¥å‰–æ Gradle æ’ä»¶æ¶æ„ä½“ç³»ä¸­æ¶‰åŠçš„æ ¸å¿ƒåŸç†ï¼Œå°½è¯·æœŸå¾…~</p>

<section id="nice" data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com" style="font-size: 16px; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; margin-top: -10px; line-height: 1.75; color: #595959; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;"><h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 25px;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; color: #595959;">å…¬ä¼—å·</span><span class="suffix"></span></h1>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">æˆ‘çš„å…¬ä¼—å· <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #595959;">JsonChao</code> å¼€é€šå•¦ï¼Œå¦‚æœæ‚¨æƒ³ç¬¬ä¸€æ—¶é—´è·å–æœ€æ–°æ–‡ç« å’Œæœ€æ–°åŠ¨æ€ï¼Œæ¬¢è¿æ‰«æå…³æ³¨~</p>
<figure data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px;"><img src="https://user-gold-cdn.xitu.io/2020/6/11/172a29b8b626ef93?w=258&amp;h=258&amp;f=jpeg&amp;s=28705" alt style="max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain;"></figure>

<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">å‚è€ƒé“¾æ¥ï¼š</span><span class="suffix"></span></h1>
<hr data-tool="mdniceç¼–è¾‘å™¨" style="height: 1px; margin: 0; margin-top: 10px; margin-bottom: 10px; border: none; border-top: 1px solid black;">
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">1ã€<a href="https://guides.gradle.org/designing-gradle-plugins/" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">è‡ªå®šä¹‰ Gradle æ’ä»¶ å®˜æ–¹æ–‡æ¡£</a></p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">2ã€<a href="https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.BaseExtension.html" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">Android Plugin DSL</a></p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">3ã€<a href="http://google.github.io/android-gradle-dsl/javadoc/2.1/com/android/build/api/transform/Transform.html" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">Transform API</a></p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">4ã€<a href="https://mp.weixin.qq.com/s?__biz=MzIwMTAzMTMxMg==&amp;mid=2649492683&amp;idx=1&amp;sn=834c7dd084af2d446e84a2865a5c2b9c&amp;chksm=8eec8734b99b0e221407fbf95004fd1a0abc5a2bb2a78a5a66edb1841fda6149874cbebc0295&amp;scene=38#wechat_redirect" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">ä¸€ç¯‡æ–‡ç« å¸¦ä½ äº†è§£Gradleæ’ä»¶çš„æ‰€æœ‰åˆ›å»ºæ–¹å¼</a></p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">5ã€<a href="https://juejin.im/post/6844903608190763015#heading-5" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">å†™ç»™ Android å¼€å‘è€…çš„ Gradle ç³»åˆ—ï¼ˆä¸‰ï¼‰æ’°å†™ plugin</a></p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">6ã€<a href="https://www.jianshu.com/p/031b62d02607" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">Gradle Transform API çš„åŸºæœ¬ä½¿ç”¨</a></p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">7ã€<a href="https://mp.weixin.qq.com/s/2TTXt5virr2vMNZRlzIT3w" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">å¦‚ä½•å¼€å‘ä¸€æ¬¾é«˜æ€§èƒ½çš„ gradle transform</a></p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">8ã€<a href="https://www.jianshu.com/p/822e44a5ea97" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">gradleè¶…è¯¦ç»†è§£æ</a></p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">9ã€<a href="https://www.jianshu.com/p/16ed4d233fd1" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">ã€Androidã€‘å‡½æ•°æ’æ¡©ï¼ˆGradle + ASMï¼‰</a></p>
</section></li></ul>
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 24px;"><span class="prefix" style="display: none;"></span><span class="content">Contanct Me</span><span class="suffix"></span></h1>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">â—  å¾®ä¿¡ï¼š</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<blockquote data-tool="mdniceç¼–è¾‘å™¨" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: rgb(239, 112, 96); background: #fff9f9;">
<p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0px; color: black; line-height: 26px;">æ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡ï¼š<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);">bcce5360</code></p>
</blockquote>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">â—  å¾®ä¿¡ç¾¤ï¼š</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<blockquote data-tool="mdniceç¼–è¾‘å™¨" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: rgb(239, 112, 96); background: #fff9f9;">
<p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0px; color: black; line-height: 26px;"><strong style="font-weight: bold; color: black;">ç”±äºå¾®ä¿¡ç¾¤å·²è¶…è¿‡ 200 äººï¼Œéº»çƒ¦å¤§å®¶æƒ³è¿›å¾®ä¿¡ç¾¤çš„æœ‹å‹ä»¬ï¼ŒåŠ æˆ‘å¾®ä¿¡æ‹‰ä½ è¿›ç¾¤ã€‚</strong></p>
</blockquote>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">â—  QQç¾¤ï¼š</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<blockquote data-tool="mdniceç¼–è¾‘å™¨" style="display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: rgb(239, 112, 96); background: #fff9f9;">
<p style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0px; color: black; line-height: 26px;">2åƒäººQQç¾¤ï¼Œ<strong style="font-weight: bold; color: black;">Awesome-Androidå­¦ä¹ äº¤æµç¾¤ï¼ŒQQç¾¤å·ï¼š959936182</strong>ï¼Œ æ¬¢è¿å¤§å®¶åŠ å…¥~</p>
</blockquote>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;"><span class="prefix" style="display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;">About me</span><span class="suffix"></span><span style="display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;"> </span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><h3 style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">Email: <a href style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">chao.qu521@gmail.com</a></span><span class="suffix" style="display: none;"></span></h3>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><h3 style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">Blog: <a href="https://jsonchao.github.io/" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">https://jsonchao.github.io/</a></span><span class="suffix" style="display: none;"></span></h3>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;"><h3 style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">æ˜é‡‘: <a href="https://juejin.im/user/4318537403878167" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">https://juejin.im/user/4318537403878167</a></span><span class="suffix" style="display: none;"></span></h3>
</section></li></ul>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">å¾ˆæ„Ÿè°¢æ‚¨é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›æ‚¨èƒ½å°†å®ƒåˆ†äº«ç»™æ‚¨çš„æœ‹å‹æˆ–æŠ€æœ¯ç¾¤ï¼Œè¿™å¯¹æˆ‘æ„ä¹‰é‡å¤§ã€‚</span><span class="suffix" style="display: none;"></span></h3>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; font-weight: bold; color: black; font-size: 20px;"><span class="prefix" style="display: none;"></span><span class="content">å¸Œæœ›æˆ‘ä»¬èƒ½æˆä¸ºæœ‹å‹ï¼Œåœ¨ <a href="https://github.com/JsonChao" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">Github</a>ã€<a href="https://juejin.im/user/4318537403878167" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);">æ˜é‡‘</a> ä¸Šä¸€èµ·åˆ†äº«çŸ¥è¯†ã€‚</span><span class="suffix" style="display: none;"></span></h3>
